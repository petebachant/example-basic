schema: '2.0'
stages:
  collect-data:
    cmd: calkit xenv -n py --no-check -- python scripts/collect-data.py
    deps:
    - path: .calkit/env-locks/py
      hash: md5
      md5: b9aaffa8f0170e57e53bd13e24f88422.dir
      size: 3324
      nfiles: 1
    - path: scripts/collect-data.py
      hash: md5
      md5: 7f049ff59ed43f2fe865fe83e3f1e7c1
      size: 502
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 2be3a93156cd35c41e3591b625c04289
      size: 44692
  plot-voltage:
    cmd: calkit xenv -n py-uv --no-check -- python scripts/plot-voltage.py
    deps:
    - path: .calkit/env-locks/py-uv
      hash: md5
      md5: 9583855b8834b89acffcf22a7b80b1cc.dir
      size: 231
      nfiles: 1
    - path: data/raw/data.csv
      hash: md5
      md5: 2be3a93156cd35c41e3591b625c04289
      size: 44692
    - path: scripts/plot-voltage.py
      hash: md5
      md5: fd1c9acc53ff4077cf0b07991dbdedca
      size: 309
    outs:
    - path: figures/voltage-time-series.png
      hash: md5
      md5: 9a8bde28b63b6e55e44bdd47bb5073b8
      size: 42278
  copy-figures-to-paper-dir:
    cmd: cp -r figures paper/figures
    deps:
    - path: figures
      hash: md5
      md5: d6fd2418e3b774996ddd0f26715c36ac.dir
      size: 45148
      nfiles: 2
    outs:
    - path: paper/figures
      hash: md5
      md5: d6fd2418e3b774996ddd0f26715c36ac.dir
      size: 45148
      nfiles: 2
  build-paper:
    cmd: calkit latex build -e tex --no-check paper/paper.tex
    deps:
    - path: .calkit/env-locks/tex
      hash: md5
      md5: d27aaac6880bba6fce314708ffd59fbd.dir
      size: 1197
      nfiles: 1
    - path: figures
      hash: md5
      md5: 30b71f789181987be900a6184a3a9c2d.dir
      size: 42304
      nfiles: 2
    - path: paper/paper.tex
      hash: md5
      md5: 90cc9ad46f55fc638354deccdebb7ebb
      size: 698
    outs:
    - path: paper/paper.pdf
      hash: md5
      md5: 16eab30f8026827f4e65e8a46733fcea
      size: 95540
  _check_env_py:
    cmd: calkit check conda-env --file environment.yml --output .calkit/env-locks/py.yml
    deps:
    - path: environment.yml
      hash: md5
      md5: 4282ecbec6810eb293bdf62d7f956ffd
      size: 119
    outs:
    - path: .calkit/env-locks/py.yml
      hash: md5
      md5: 8119fb42c7e8531010248790fff169cf
      size: 2200
  _check_env_tex:
    cmd: calkit check docker-env texlive/texlive:latest-full -o .calkit/env-locks/tex.json
    outs:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: b04cd12c7a8313853c8739a55f6320fe
      size: 2791
  _check-env-py:
    cmd: calkit check environment --name py
    deps:
    - path: environment.yml
      hash: md5
      md5: 4282ecbec6810eb293bdf62d7f956ffd
      size: 119
    outs:
    - path: .calkit/env-locks/py.yml
      hash: md5
      md5: 7afb6adea0f62f62086f86a70d452616
      size: 2206
  _check-env-tex:
    cmd: calkit check environment --name tex
    outs:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: 13f6ce5796b0b1f7d0465f7bc3616a2d
      size: 1171
  _check-env-py-uv:
    cmd: calkit check environment --name py-uv
    deps:
    - path: requirements.txt
      hash: md5
      md5: 8b56659ca790e2903bcdce8ae089b35d
      size: 17
    outs:
    - path: .calkit/env-locks/py-uv.txt
      hash: md5
      md5: 7105194856a186a9cd3644542d3e4dde
      size: 231
